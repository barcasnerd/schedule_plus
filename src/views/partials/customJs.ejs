<!---Boostrap Javascript-->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
    integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
    crossorigin="anonymous"></script>
<!--Custom Javascript-->
<script src="../public/js/actions.js"></script>
<!--jQuery CDN-->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!--jsPDF-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
<script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
<script>

    var loadModal = new bootstrap.Modal(document.getElementById('loadModal'), {
        keyboard: false
    });

    document.getElementById('saveButton').addEventListener('click',()=>{
        reloadPage();
    });

    function reloadPage() {
        loadModal.show();
        setTimeout(() => {
            demoFromHTML()
        }, 3000);
    }

    function demoFromHTML() {
        var pdf = new jsPDF('p', 'pt', 'letter');

        pdf.cellInitialize();
        pdf.setFontSize(10);
        $.each($('#schedule tr'), function (i, row) {
            $.each($(row).find("td, th"), function (j, cell) {
                var txt = $(cell).text().trim() || " ";
                var width = (j == 4) ? 40 : 70; //make 4th column smaller
                pdf.cell(10, 50, width, 30, txt, i);
            });
        });

        pdf.save('sample-file.pdf');
        location.reload();
    }

</script>